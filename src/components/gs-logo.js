(function () {
    const $template = document.createElement('template');
    $template.innerHTML = `
    <style>
        svg {
            position: relative;
            top: .125rem;
            fill: currentColor;
            stroke: currentColor;
            height: 1.6em;
            width: 1.6em;
        }
        [data-animate=loading] .gs-spinner-dots > * {
            stroke: rgba(0,0,0,0);
            animation: strokeAnimation 2.5s infinite;
        }
        [data-animate=loading] .gs-spinner-dots > *:nth-child(0) {
            animation-delay: 0s;
        }
        [data-animate=loading] .gs-spinner-dots > *:nth-child(1) {
            animation-delay: 0.5s;
        }
        [data-animate=loading] .gs-spinner-dots > *:nth-child(2) {
            animation-delay: 1s;
        }
        [data-animate=loading] .gs-spinner-dots > *:nth-child(3) {
            animation-delay: 1.5s;
        }
        [data-animate=loading] .gs-spinner-dots > *:nth-child(4) {
            animation-delay: 2s;
        }
        [data-animate=loading] #gs-logo-clip>rect {
            width: 12px;
            height: 41px;
            x: 5;
            y: 2;
            animation: scanAnimation 2.5s infinite;
        }

        @keyframes strokeAnimation {
            0%, 80%, 100% {
                stroke: rgba(0,0,0,0);
            }
            40% {
                stroke: currentColor;
            }
        }

        @keyframes scanAnimation {
            0%, 80%, 100% {
                x: 42;
            }
            40% {
                x: 5;
            }
        }
    </style>
    <svg version="1.1" viewBox="0 0 48 48" role="img" xmlns="http://www.w3.org/2000/svg">
        <defs>
            <clipPath id="gs-logo-clip">
                <rect width="48" height="48" x="0" y="0" stroke="none" />
            </clipPath>
        </defs>
        <title>GakuScan</title>
        <g clip-path="url(#gs-logo-clip)">
            <path d="m35.553 21.399q-0.05501 0.38508-0.66014 0.49511-0.60513 0.08252-1.4028 0.02751-0.77016-0.05501-1.4028-0.13753-0.19254 0-0.35758-0.02751-0.16504-0.02751-0.27506-0.02751-1.3478-0.11002-2.8056-0.05501-1.4303 0.02751-2.5856 0.13753-0.02751 0.57762-0.02751 1.2103 0.02751 0.63264 0.05501 1.2928 0.05501 1.3753 0 2.7506-0.02751 1.3478-0.49511 2.4205-0.4676 1.1002-1.6779 1.6504-0.35758-0.16504-0.71515-0.33007-0.33007-0.13753-0.82518-0.16504-1.1828-0.4676-2.0904-1.2653-0.88019-0.77016-1.8154-1.4853 0.08252 0.02751 0.16504 0.05501 0.11002 0 0.19254 0.02751 0.63264 0.13753 1.3478 0.27506 0.74266 0.11002 1.4303 0.05501 0.68765-0.05501 1.2378-0.41259 0.66014-0.4401 0.88019-1.2378 0.24755-0.82518 0.24755-1.7604 0.02751-0.9352-0.02751-1.7879 0-0.33007-0.02751-0.63264 0-0.30256 0-0.55012-1.0452 0.08252-2.338 0.22005-1.2928 0.13753-2.503 0.4676-1.2103 0.30256-2.0354 0.9352-1.0452 0.11002-1.8429-0.24755-0.77016-0.38508-1.2653-0.99021-0.49511-0.60513-0.71515-1.1828 0.16504-0.33007 0.4676-0.30256 0.30256 0.0275 0.60513 0.11002 0.13753 0.02751 0.24755 0.08252 0.13753 0.02751 0.24755 0.02751 1.1277 0.05501 2.5305-0.05501 1.4028-0.13753 2.8606-0.30256 0.85268-0.11002 1.7054-0.19254 0.88019-0.08252 1.7054-0.13753-0.05501-0.63264-0.4676-1.1002-0.41259-0.4676-0.85268-0.88019-0.44009-0.4401-0.57762-0.88019 0.35758-0.16504 0.82518 0.05501 0.4676 0.19254 0.9352 0.44009 0.22005 0.11002 0.41259 0.22005 0.19254 0.11002 0.35758 0.16504 0.77016-0.38508 1.2653-0.96271 0.52261-0.60513 0.96271-1.2928-0.66014-0.08252-1.5953-0.08252-0.9352-0.02751-1.9254 0.11002-0.99021 0.13753-1.7879 0.44009t-1.2103 0.82518q-0.30256-0.02751-0.88019-0.35758-0.55012-0.33007-1.1002-0.85268-0.52261-0.52261-0.77016-1.0727 0.19254-0.05501 0.79767-0.05501t0.88019-0.02751q0.57762-0.02751 1.2653-0.08252 0.71515-0.08252 1.4578-0.16504 1.2103-0.13753 2.448-0.24755 1.2378-0.11002 2.3105-0.08252 0.35758-0.41259 1.0452-0.33007 0.71515 0.08252 1.4303 0.4676 0.71515 0.38508 1.1552 0.88019 0.44009 0.4676 0.27506 0.85268-0.08252 0.19254-0.35758 0.30256-0.24755 0.11002-0.63264 0.38508-0.77017 0.52261-1.7329 1.2103-0.9352 0.66014-1.9529 1.1277 0.02751 0.05501 0.08252 0.16504 0.08252 0.13753 0.16504 0.33007 0.08252 0.16504 0.05501 0.30256 0.33007-0.05501 0.74266-0.05501 0.4401 0 0.88019 0 0.57762 0 1.1552 0 0.57762-0.02751 1.0452-0.11002 0.30256-0.05501 0.55012-0.33007 0.24755-0.30256 0.52261-0.35758 0.35758-0.08252 0.9352 0.08252 0.60513 0.13753 1.1828 0.33007 0.57762 0.19254 0.79767 0.30256 0.24755 0.08252 0.71515 0.33007 0.4676 0.22005 0.82518 0.52261 0.38508 0.27506 0.33007 0.52261zm0.60513-5.4737q-0.57762 0.13753-1.0177 0.38508-0.44009 0.24755-0.88019 0.4676-0.41259 0.19254-1.0177 0.24755-0.68765-0.38508-1.4303-0.71515-0.71515-0.35758-1.1828-0.96271 0.27506-0.49511 0.66014-0.82518 0.41259-0.35758 0.77016-0.74266 0.35758-0.41259 0.41259-1.0727-0.68765-0.77016-1.9804-0.82518-1.2653-0.05501-2.9156 0.05501-0.30256 0.02751-0.60513 0.05501-0.30256 0-0.63264 0.02751-1.1828 0.05501-2.5305 0.19254-1.3203 0.11002-2.6406 0.27506-1.2928 0.16504-2.393 0.35758-0.55012 0.11002-1.4578 0.35758-0.90769 0.24755-1.4578 0.66014 0.08252 0.88019-0.11002 1.6779-0.16504 0.77016-0.38508 1.5678-0.11002 0.38508-0.22005 0.77016-0.08252 0.38508-0.16504 0.79767 0.02751 0.11002 0.08252 0.22005 0.08252 0.08252 0.16504 0.19254 0.13753 0.16504 0.22005 0.35758 0.08252 0.19254-0.08252 0.49511-0.49511 0.02751-1.1828-0.22005-0.66014-0.27506-1.2653-0.74266-0.60513-0.4676-0.90769-1.0727-0.30256-0.63264-0.05501-1.3753 0.63264 0.02751 1.0177-0.60513 0.41259-0.63264 0.74266-1.3753 0.11002-0.19254 0.19254-0.38508 0.11002-0.22005 0.19254-0.38508-0.33007-0.24755-0.57762-0.60513-0.22005-0.35758-0.77016-0.38508 0.08252-0.22005 0.24755-0.30256 0.19254-0.11002 0.22005-0.38508 3.2457-0.52261 6.8215-0.85268 3.6033-0.35758 7.0965-0.52261 0.55012-0.77016 1.1277-1.4853 0.57762-0.74266 1.1002-1.5403-0.19254-0.38508-0.49511-0.68765-0.27506-0.30256-0.57762-0.57762 0.16504-0.11002 0.16504-0.19254 0-0.082518-0.05501-0.27506 0-0.027506 0-0.027506 0.38508 0.11002 1.0177 0.22005 0.63264 0.082518 1.2928 0.24755 0.66014 0.16504 1.1002 0.4676 0.4401 0.30256 0.4676 0.82518 0.0275 0.49511-0.4401 0.85268-0.4676 0.35758-0.90769 0.41259-0.22005 0.66014-0.85268 0.9352-0.60513 0.24755-1.3753 0.38508-0.74266 0.11002-1.3753 0.35758 0.16504-0.02751 0.44009-0.02751 0.27506-0.02751 0.60513-0.02751 0.57762-0.02751 1.2103-0.05501 0.63264-0.05501 1.1277-0.16504 0.52261-0.13753 0.68765-0.41259 1.1828 0.13753 2.1455 0.57762 0.96271 0.4401 1.5678 1.3753-0.19254 0.19254-0.68765 0.19254 0.88019 0.52261 1.2928 1.5953 0.44009 1.0452 0.44009 2.228zm-11.36-5.7762q-0.68765 0.19254-1.2103-0.19254-0.49511-0.38508-0.96271-0.85268-0.24755-0.27506-0.52261-0.49511-0.24755-0.24755-0.52261-0.41259-0.13753-0.49511-0.16504-1.1277-0.02751-0.63264-0.02751-0.99021 0-0.11002 0-0.13753 0.9077 0.35758 1.7054 0.82518t1.2653 1.2653q0.49511 0.77017 0.44009 2.118zm-5.4462 0.99021q-0.63264 0.11002-1.1002-0.16504t-0.9077-0.60513q-0.30256-0.22005-0.60513-0.41259-0.27506-0.19254-0.60513-0.30256-0.055012-0.22005-0.11002-0.68765t-0.13753-0.96271q-0.055012-0.49511-0.22005-0.79767 1.5403 0.44009 2.5856 1.3203 1.0727 0.88019 1.1002 2.6131z" stroke-width="0" aria-label="学"/>
            <path d="m12.85 38.622q1.2993 0.99714 2.5684 2.2964l-0.60433 0.51368q-1.2691-1.3295-2.4475-2.236-1.1784 1.2691-2.6893 2.2662l-0.57411-0.51368q3.2029-2.0849 4.1094-4.1699l-3.2936 0.21152-0.090649-0.7252 3.5051-0.15108 0.3626-0.09065 0.48346 0.48346q0.21152 0.21152-0.12087 0.27195-0.57411 0.99714-1.2087 1.8432zm10.666 0.39281-2.8101 0.30216 0.57411 2.4475-0.66476 0.15108-0.57411-2.508-3.0821 0.3626-0.09065-0.63454 3.0216-0.33238-0.30216-1.4202-2.0547 0.24173-0.12087-0.63454 1.9943-0.21152-0.30216-1.39 0.63454-0.12087q0.27195-0.03022 0.09065 0.21152l0.24173 1.2087 2.2058-0.30216 0.12087 0.63454-2.1454 0.27195 0.30216 1.4202 2.8403-0.33238zm3.9281-0.90649 2.4777-0.60433 0.15108-0.09065 0.48346 0.48346q0.12087 0.12087-0.09065 0.1813-0.5439 0.87628-1.1482 1.6921l-0.51368-0.33238q0.48346-0.63454 0.90649-1.3295l-2.0849 0.51368 1.0274 3.0519-0.60433 0.21152-0.99714-3.1425-1.7526 0.48346-0.21152-0.60433 1.7526-0.39281-0.48346-1.4504 0.63454-0.12087q0.27195 0 0.09065 0.21152zm11.452-0.24173q-1.6015 3.3238-5.3785 3.5051-0.15108 0.39281-0.30216 0.06043l-0.24173-0.78563q3.9281-0.09065 5.2879-3.2332zm-4.2605 0q-0.81584-0.75541-1.541-1.2389l0.51368-0.63455q0.63454 0.39281 1.6015 1.2993z" stroke-width="0" aria-label="スキャン"/>
        </g>
        <g stroke-width="0">
            <path d="m9.1035 3.1738-0.68945 0.69141v8.2324h1.3789v-7.543h7.2617v-1.3809z" stroke-linejoin="bevel" />
            <path d="m9.7931 12.098v0.40351c0 0.51387 0.41386 0.76909 0.68976 0.97602h-2.7591c0.27591-0.20693 0.68976-0.46214 0.68976-0.97602v-0.40351l0.68976-0.06898z" />
            <path d="m17.054 3.1748h0.40351c0.51387 0 0.76909-0.41386 0.97602-0.68976v2.7591c-0.20693-0.27591-0.46214-0.68976-0.97602-0.68976h-0.40351l-0.068976-0.68976z" />
            <path d="m30.58 2.6074a1.2567 1.2567 0 0 0-1.2559 1.2578 1.2567 1.2567 0 0 0 1.2559 1.2559h7.0605v6.9766a1.2567 1.2567 0 0 0 1.2559 1.2559 1.2567 1.2567 0 0 0 1.2578-1.2559v-8.2324a1.2568 1.2568 0 0 0-1.2578-1.2578z" stroke-linecap="round" stroke-linejoin="round" />
            <path d="m8.4141 25.623v7.8984l0.68945 0.68945h7.9512v-1.3809h-7.2617v-7.207z" stroke-linejoin="bevel" />
            <path d="m17.054 32.831h0.40351c0.51387 0 0.76909-0.41386 0.97602-0.68976v2.7591c-0.20693-0.27591-0.46214-0.68976-0.97602-0.68976h-0.40351l-0.06898-0.68976z" />
            <path d="m8.4135 25.624v-0.40351c0-0.51387-0.41386-0.76909-0.68976-0.97602h2.7591c-0.27591 0.20693-0.68976 0.46214-0.68976 0.97602v0.40351l-0.68976 0.06898z" />
            <path d="m38.896 24.367a1.2567 1.2567 0 0 0-1.2559 1.2559v6.6406h-7.0605a1.2567 1.2567 0 0 0-1.2559 1.2578 1.2567 1.2567 0 0 0 1.2559 1.2559h8.3164a1.2568 1.2568 0 0 0 1.2578-1.2559v-7.8984a1.2567 1.2567 0 0 0-1.2578-1.2559z" stroke-linecap="round" stroke-linejoin="round" />
        </g>
        <g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width=".51024" class="gs-spinner-dots">
            <path d="m10.549 44.359a0.78309 0.7141 0 0 1 1.0903 0.06931 0.78309 0.7141 0 0 1-0.04767 0.99574 0.78309 0.7141 0 0 1-1.0928-0.01759 0.78309 0.7141 0 0 1-0.0091-0.99665"/>
            <path d="m17.015 44.359a0.78309 0.7141 0 0 1 1.0903 0.06931 0.78309 0.7141 0 0 1-0.04767 0.99574 0.78309 0.7141 0 0 1-1.0928-0.01759 0.78309 0.7141 0 0 1-0.0091-0.99665"/>
            <path d="m23.482 44.359a0.78309 0.7141 0 0 1 1.0903 0.06931 0.78309 0.7141 0 0 1-0.04767 0.99574 0.78309 0.7141 0 0 1-1.0928-0.01759 0.78309 0.7141 0 0 1-0.0091-0.99665"/>
            <path d="m29.949 44.359a0.78309 0.7141 0 0 1 1.0903 0.06931 0.78309 0.7141 0 0 1-0.04767 0.99574 0.78309 0.7141 0 0 1-1.0928-0.01759 0.78309 0.7141 0 0 1-0.0091-0.99665"/>
            <path d="m36.416 44.359a0.78309 0.7141 0 0 1 1.0903 0.06931 0.78309 0.7141 0 0 1-0.04767 0.99574 0.78309 0.7141 0 0 1-1.0928-0.01759 0.78309 0.7141 0 0 1-0.0091-0.99665"/>
        </g>
    </svg>
    `;

    class GSLogo extends HTMLElement {
        static observedAttributes = ['loading'];

        constructor() {
            super();
            this.attachShadow({ mode: 'open'});
            this.shadowRoot.appendChild($template.content.cloneNode(true));
        }

        attributeChangedCallback(name, oldValue, newValue) {
            if(name != 'loading') {
                return;
            }
            const $svg = this.shadowRoot.querySelector('svg');
            if (!newValue && newValue !== '') {
                delete $svg.dataset.animate;
                $svg.setAttribute('role', 'img');
                $svg.querySelector('title').innerHTML = 'GakuScan';
                $svg.removeAttribute('aria-live');
            } else {
                $svg.dataset.animate = 'loading';
                $svg.querySelector('title').innerHTML = 'Loading...';
                $svg.setAttribute('role', 'status');
                $svg.setAttribute('aria-live', 'polite');
            }
        }
    }

    customElements.define('gs-logo', GSLogo);
})();